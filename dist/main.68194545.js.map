{"version":3,"sources":["main.js"],"names":["$","hide","window","onload","fadeIn","$siteList","$lastLi","find","on","e","url","prompt","indexOf","logo","simplify","img","repeat","hashMap","forEach","ele","alert","push","type","render","newHashMap","JSON","parse","localStorage","getItem","replace","remove","node","index","$Li","insertBefore","toUpperCase","preventDefault","splice","document","console","log","String","fromCharCode","charCode","toLowerCase","open","stopPropagation"],"mappings":"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","file":"main.68194545.js","sourceRoot":"..\\src","sourcesContent":["$(\"body\").hide();\r\nwindow.onload = function () {\r\n  // 淡入淡出\r\n  $(\"body\").fadeIn(2000);\r\n};\r\n$(function () {\r\n  const $siteList = $(\".siteList\");\r\n  const $lastLi = $siteList.find(\"li.last\");\r\n  // 绑定添加事件\r\n  $(\".addButton\").on(\"click\", (e) => {\r\n    let url = window.prompt(\"请输入想要添加的网址:\"); //提示用户进行输入的对话框\r\n    if (url && url.indexOf(\"https://\") === -1) {\r\n      url = \"https://\" + url;\r\n    }\r\n    let logo = simplify(url)[0];\r\n    let img = url + \"/favicon.ico\";\r\n    let repeat = false;\r\n    hashMap.forEach((ele) => {\r\n      if (url && ele.url === url) {\r\n        repeat = true;\r\n        window.alert(\"已有该站点，请重新输入。\");\r\n      }\r\n    });\r\n    if (!repeat) {\r\n      hashMap.push({\r\n        logo: logo,\r\n        img: img,\r\n        type: \"img\",\r\n        url: url,\r\n      });\r\n    }\r\n\r\n    render();\r\n  });\r\n  //从 localStorage 获取最新数据\r\n  const newHashMap = JSON.parse(localStorage.getItem(\"x\"));\r\n  //用数组储存原始数据\r\n  const hashMap = newHashMap || [\r\n    {\r\n      logo: \"M\",\r\n      type: \"img\",\r\n      img: \"https://developer.mozilla.org/favicon.ico\",\r\n      url: \"https://developer.mozilla.org/zh-CN/\",\r\n    },\r\n    {\r\n      logo: \"C\",\r\n      type: \"img\",\r\n      img: \"https://caniuse.com/img/favicon-128.png\",\r\n      url: \"https://caniuse.com\",\r\n    },\r\n    {\r\n      logo: \"R\",\r\n      type: \"img\",\r\n      img: \"http://www.ruanyifeng.com/favicon.ico\",\r\n      url: \"http://www.ruanyifeng.com/blog/\",\r\n    },\r\n  ];\r\n  //简化 url 函数\r\n  const simplify = (url) => {\r\n    if (url === \"https://developer.mozilla.org/zh-CN/\") {\r\n      url = \"MDN官网\";\r\n    } else if (url === \"http://www.ruanyifeng.com/blog/\") {\r\n      url = \"阮一峰博客\";\r\n    }\r\n    return url\r\n      .replace(\"https://\", \"\")\r\n      .replace(\"http://\", \"\")\r\n      .replace(\"www.\", \"\")\r\n      .replace(/\\/.*/, \"\");\r\n  };\r\n  //封装渲染函数\r\n  const render = () => {\r\n    $siteList.find(\"li:not(.last)\").remove();\r\n    hashMap.forEach((node, index) => {\r\n      let $Li;\r\n      if (node.type === \"img\") {\r\n        $Li = $(`<li>\r\n        <a href=\"${node.url}\">\r\n          <div class=\"site\">\r\n              <div class=\"logo\">\r\n                <img src=\"${node.img}\" alt=\"\">\r\n              </div>\r\n              <span class=\"link\">${simplify(node.url)}</span>\r\n              <div class=\"close\">\r\n                <svg class=\"icon\">\r\n                  <use xlink:href=\"#icon-close\"></use>\r\n                </svg>\r\n              </div>\r\n            </div>\r\n        </a>\r\n      </li>`).insertBefore($lastLi);\r\n      } else if (node.type === \"test\") {\r\n        $Li = $(`<li>\r\n        <a href=\"${node.url}\">\r\n          <div class=\"site\">\r\n              <div class=\"logo\">${node.logo.toUpperCase()}</div>\r\n              <span class=\"link\">${simplify(node.url)}</span>\r\n              <div class=\"close\">\r\n                <svg class=\"icon\">\r\n                  <use xlink:href=\"#icon-close\"></use>\r\n                </svg>\r\n              </div>\r\n            </div>\r\n        </a>\r\n      </li>`).insertBefore($lastLi);\r\n      }\r\n      $Li &&\r\n        $Li.on(\"click\", \".close\", (e) => {\r\n          e.preventDefault();\r\n          hashMap.splice(index, 1);\r\n          render();\r\n        }) &&\r\n        //图片请求失败处理\r\n        $(\"img\").on(\"error\", (e) => {\r\n          hashMap[index].type = \"test\";\r\n          render();\r\n        });\r\n    });\r\n  };\r\n  render();\r\n\r\n  // 添加键盘跳转事件\r\n  $(document).on(\"keypress\", (e) => {\r\n    console.log(String.fromCharCode(e.charCode));\r\n    hashMap.forEach((ele) => {\r\n      console.log(ele.logo);\r\n      if (ele.logo.toLowerCase() === String.fromCharCode(e.charCode)) {\r\n        window.open(ele.url, \"_self\");\r\n      }\r\n    });\r\n  });\r\n  //阻止 input 冒泡\r\n  $(\"input\").on(\"keypress\", (e) => {\r\n    e.stopPropagation();\r\n  });\r\n  // 跳转时将数据保存到 localStorage\r\n  // window.onbeforeunload = () => {\r\n  //   const string = JSON.stringify(hashMap);\r\n  //   localStorage.setItem(\"x\", string);\r\n  // };\r\n});\r\n"]}